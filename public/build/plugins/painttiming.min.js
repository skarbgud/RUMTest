!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.PaintTiming){var o={"first-paint":"fp","first-contentful-paint":"fcp","largest-contentful-paint":"lcp"},s={initialized:!1,complete:!1,supported:null,timingCache:{},timingHistory:{},observer:null,externalMetrics:{},done:function(e,t){var i,n,r;if(this.complete)return this;if("load"!==t&&(!e||"spa_hard"!==e.initiator)){this.complete=!0;return this}if((i=BOOMR.getPerformance())&&"function"==typeof i.getEntriesByType){if((n=i.getEntriesByType("paint"))&&n.length){BOOMR.info("This user agent supports PaintTiming","pt");for(r=0;r<n.length;r++){s.timingCache[n[r].name]=n[r].startTime;o[n[r].name]&&BOOMR.addVar("pt."+o[n[r].name],Math.floor(n[r].startTime),!0)}this.complete=!0;BOOMR.sendBeacon()}}else this.complete=!0},onObserver:function(e){var t=e.getEntries();if(0!==t.length){var i=t[t.length-1],n=i.renderTime||i.loadTime;s.timingCache[i.entryType]=n;s.timingHistory[i.entryType]=s.timingHistory[i.entryType]||[];s.timingHistory[i.entryType].push(n);BOOMR.addVar("pt.lcp",Math.floor(n),!0);s.externalMetrics.lcp=function(){return Math.floor(n)}}}};BOOMR.plugins.PaintTiming={init:function(){if(!this.is_supported()){s.complete=!0;s.initialized=!0}if(!s.complete&&"hidden"===BOOMR.visibilityState()){BOOMR.addVar("pt.hid",1,!0);s.complete=!0}if(!s.initialized){BOOMR.subscribe("page_ready",s.done,"load",s);BOOMR.subscribe("xhr_load",s.done,"xhr",s);BOOMR.subscribe("before_unload",s.done,null,s);if("function"==typeof BOOMR.window.PerformanceObserver&&"function"==typeof window.LargestContentfulPaint){s.observer=new BOOMR.window.PerformanceObserver(s.onObserver);s.observer.observe({type:"largest-contentful-paint",buffered:!0})}s.initialized=!0}return this},is_complete:function(){return!0},is_enabled:function(){return s.initialized&&this.is_supported()},is_supported:function(){if(null!==s.supported)return s.supported;var e=BOOMR.getPerformance();s.supported=e&&void 0!==window.PerformancePaintTiming&&"function"==typeof e.getEntriesByType;return s.supported},getTimingFor:function(e){var t,i,n;if(s.timingCache[e])return s.timingCache[e];if(this.is_supported()){if((n=BOOMR.getPerformance())&&"function"==typeof n.getEntriesByType&&(t=n.getEntriesByType("paint"))&&t.length)for(i=0;i<t.length;i++)if(t[i].name===e){s.timingCache[e]=t[i].startTime;return s.timingCache[e]}}},getHistoryFor:function(e){return s.timingHistory[e]||[]},metrics:s.externalMetrics}}}();
//# sourceMappingURL=painttiming.min.js.map