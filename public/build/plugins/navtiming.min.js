!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.NavigationTiming){var c={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(t){var n;if(t&&"spa_hard"===t.initiator)c.done(t);else if(t&&"spa"===t.initiator)c.sendBeacon();else{BOOMR.window;var e,i,o={};if(t){t.data&&(t=t.data);if((n=BOOMR.getPerformance())&&t.restiming){o={nt_red_st:t.restiming.redirectStart,nt_red_end:t.restiming.redirectEnd,nt_fet_st:t.restiming.fetchStart,nt_dns_st:t.restiming.domainLookupStart,nt_dns_end:t.restiming.domainLookupEnd,nt_con_st:t.restiming.connectStart,nt_con_end:t.restiming.connectEnd,nt_req_st:t.restiming.requestStart,nt_res_st:t.restiming.responseStart,nt_res_end:t.restiming.responseEnd};t.restiming.secureConnectionStart&&(o.nt_ssl_st=t.restiming.secureConnectionStart);for(i in o)if(o.hasOwnProperty(i)&&o[i]){o[i]+=n.timing.navigationStart;o[i]=Math.floor(o[i])}}if(t.timing){e=t.timing;o.nt_req_st||(o.nt_req_st=e.requestStart);o.nt_res_st||(o.nt_res_st=e.responseStart);o.nt_res_end||(o.nt_res_end=e.responseEnd);o.nt_domint=e.domInteractive;o.nt_domcomp=e.domComplete;o.nt_load_st=e.loadEventEnd;o.nt_load_end=e.loadEventEnd}for(i in o)o.hasOwnProperty(i)&&!o[i]&&delete o[i];BOOMR.addVar(o,void 0,!0);c.sendBeacon()}}},done:function(){var t,n,e,i,o,r,a=BOOMR.window,s={},d=0,_=!1;if(this.complete)return this;if(t=BOOMR.getPerformance()){if("function"==typeof t.getEntriesByType)if((i=t.getEntriesByType("navigation"))&&i.length){BOOMR.info("This user agent supports NavigationTiming2","nt");i=i[0];d=t.timing?t.timing.navigationStart:0}else i=void 0;if(!i&&t.timing){BOOMR.info("This user agent supports NavigationTiming","nt");i=t.timing}if(i){!(s={nt_nav_st:t.timing?t.timing.navigationStart:0,nt_red_st:m(d,i.redirectStart),nt_red_end:m(d,i.redirectEnd),nt_fet_st:m(d,i.fetchStart),nt_dns_st:m(d,i.domainLookupStart),nt_dns_end:m(d,i.domainLookupEnd),nt_con_st:m(d,i.connectStart),nt_con_end:m(d,i.connectEnd),nt_req_st:m(d,i.requestStart),nt_res_st:m(d,i.responseStart),nt_res_end:m(d,i.responseEnd),nt_domloading:m(d,i.domLoading),nt_domint:m(d,i.domInteractive),nt_domcontloaded_st:m(d,i.domContentLoadedEventStart),nt_domcontloaded_end:m(d,i.domContentLoadedEventEnd),nt_domcomp:m(d,i.domComplete),nt_load_st:m(d,i.loadEventStart),nt_load_end:m(d,i.loadEventEnd),nt_unload_st:m(d,i.unloadEventStart),nt_unload_end:m(d,i.unloadEventEnd)}).nt_domloading&&t&&t.timing&&t.timing.domLoading&&(s.nt_domloading=t.timing.domLoading);i.secureConnectionStart&&(s.nt_ssl_st=m(d,i.secureConnectionStart));t.timing&&t.timing.msFirstPaint&&(s.nt_first_paint=t.timing.msFirstPaint);i.workerStart&&(s.nt_worker_start=m(d,i.workerStart));if(i.decodedBodySize||i.transferSize){s.nt_enc_size=i.encodedBodySize;s.nt_dec_size=i.decodedBodySize;s.nt_trn_size=i.transferSize}i.nextHopProtocol&&(s.nt_protocol=i.nextHopProtocol)}if(!s.nt_first_paint&&BOOMR.plugins.PaintTiming){_=BOOMR.plugins.PaintTiming.is_supported();(o=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(s.nt_first_paint=m(d,o))}if((!s.nt_protocol||!s.nt_first_paint)&&(!i||""!==i.nextHopProtocol)&&!_&&a.chrome&&"function"==typeof a.chrome.loadTimes&&(e=a.chrome.loadTimes())){s.nt_spdy=e.wasFetchedViaSpdy?1:0;s.nt_cinf=e.connectionInfo;"number"==typeof e.firstPaintTime&&0!==e.firstPaintTime&&(s.nt_first_paint=Math.round(1e3*e.firstPaintTime))}if(t.navigation){n=t.navigation;s.nt_red_cnt=n.redirectCount;s.nt_nav_type=n.type}for(r in s)s.hasOwnProperty(r)&&void 0===s[r]&&delete s[r];BOOMR.addVar(s,void 0,!0);i&&(i.requestStart&&i.navigationStart&&i.requestStart<i.navigationStart||i.responseStart&&i.navigationStart&&i.responseStart<i.navigationStart||i.responseStart&&i.fetchStart&&i.responseStart<i.fetchStart||i.navigationStart&&i.fetchStart<i.navigationStart||i.responseEnd&&i.responseEnd>BOOMR.now()+864e5)&&BOOMR.addVar("nt_bad",1,!0);0<s.nt_load_end&&(this.fullySent=!0)}c.sendBeacon()},clear:function(t){this.complete=!(t&&t.early)&&this.fullySent},prerenderToVisible:function(){this.complete=!1;this.done()},onBeforeEarlyBeacon:function(t){t&&void 0!==t.initiator&&"spa_hard"!==t.initiator||this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!c.initialized){BOOMR.subscribe("page_ready",c.done,null,c);BOOMR.subscribe("prerender_to_visible",c.prerenderToVisible,null,c);BOOMR.subscribe("before_early_beacon",c.onBeforeEarlyBeacon,null,c);BOOMR.subscribe("xhr_load",c.xhr_done,null,c);BOOMR.subscribe("before_unload",c.done,null,c);BOOMR.subscribe("beacon",c.clear,null,c);c.initialized=!0}return this},is_complete:function(){return!0}}}function m(t,n){if("number"==typeof n&&0!==n)return Math.floor((t||0)+n)}}();
//# sourceMappingURL=navtiming.min.js.map