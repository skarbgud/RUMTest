!function(){var d,u,l,O,h,c=["uninitialized","open","responseStart","domInteractive","responseEnd"],p=-999,f=-997;BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.AutoXHR&&(d=BOOMR.window)&&d.XMLHttpRequest&&(new d.XMLHttpRequest).addEventListener){a.stop=function(){a.pause();a.observer=null};a.pause=function(){if(a.observer&&a.observer.observer&&!a.isPaused){a.isPaused=!0;a.observer.observer.disconnect()}};a.resume=function(){if(a.observer&&a.observer.observer&&a.isPaused){a.isPaused=!1;a.observer.observer.observe(u,a.observer.config)}};a.start=function(){if(!a.observer){var e={childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]};if(a.observer=BOOMR.utils.addObserver(u,e,null,l.mutation_cb,null,l)){a.observer.config=e;BOOMR.subscribe("page_unload",a.stop,null,a)}}};a.prototype.addEvent=function(e){for(var t,n,r={type:e.initiator,resource:e,nodes_to_wait:0,total_nodes:0,resources:[],complete:!1,aborted:!1,firedEarlyBeacon:!1},i=this.pending_events.length,s=this,o=i-1;0<=o;o--)if(this.pending_events[o]&&!this.pending_events[o].complete){t=this.pending_events[o];n=o;break}if(t)if("click"===t.type){if(0===t.nodes_to_wait||!t.resource.url){this.pending_events[n]=void 0;this.watch--}}else if("xhr"===t.type){if("click"===r.type)return null;if("xhr"===r.type){l.add_event_resource(e);return null}}else if(BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)){if("xhr"===r.type){l.add_event_resource(e);return null}if(BOOMR.utils.inArray(r.type,BOOMR.constants.BEACON_TYPE_SPAS)){R("Aborting previous SPA navigation");t.resource.timing.loadEventEnd=BOOMR.now();t.aborted=!0;this.sendEvent(n)}}if("click"===r.type){if(!a.observer)return null;this.setTimeout(h.xhrIdleTimeout,i)}else if("xhr"===r.type){r.nodes_to_wait++;r.total_nodes++;r.ignoreMO=!0}else if(BOOMR.utils.inArray(r.type,BOOMR.constants.BEACON_TYPE_SPAS)){a.start();if(e.wait){r.nodes_to_wait++;r.total_nodes++;e.waitComplete=function(){s.load_finished(i);e.waitComplete=void 0}}else this.setTimeout(h.spaIdleTimeout,i)}this.watch++;this.pending_events.push(r);return e.index=i};a.prototype.sendEvent=function(e){var t=this.pending_events[e],n=this;BOOMR.now();if(t&&!t.complete){this.clearTimeout(e);if(BOOMR.readyToSend()){t.complete=!0;this.watch--;t.resource.resources=t.resources;BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(t.resource.url=u.URL);if("spa"===t.type&&0===t.total_nodes&&t.resource.url===n.lastSpaLocation){R("SPA beacon cancelled, no URL change or resources triggered");BOOMR.fireEvent("spa_cancel");this.pending_events[e]=void 0;return}if(BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)){n.lastSpaLocation=t.resource.url;if(!t.forced){"spa"===t.type&&0===t.total_nodes&&(t.resource.timing.loadEventEnd=t.resource.timing.requestStart+1);if("spa_hard"===t.type){var r=BOOMR.getPerformance();r&&r.timing&&r.timing.loadEventEnd&&t.resource.timing.loadEventEnd&&t.resource.timing.loadEventEnd<r.timing.loadEventEnd&&(t.resource.timing.loadEventEnd=r.timing.loadEventEnd)}}}this.sendResource(t.resource,e)}else setTimeout(function(){n.sendEvent(e)},500)}};a.prototype.sendResource=function(r,i){function t(e,t){e&&(r.timing.loadEventEnd=t||BOOMR.now());BOOMR.real_sendBeacon();r.onComplete&&r.onComplete(r);if(BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_enabled()&&r.timing&&r.timing.requestStart){var n=BOOMR.plugins.ResourceTiming.getCompressedResourceTiming(r.timing.requestStart,r.timing.loadEventEnd);BOOMR.plugins.ResourceTiming.addToBeacon(n)}if(BOOMR.utils.inArray(r.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){s.calculateSpaTimings(r);if("number"==typeof i&&s.pending_events[i].aborted){BOOMR.addVar("pgu",u.URL,!0);BOOMR.addVar("rt.quit","",!0);BOOMR.addVar("rt.abld","",!0)}}BOOMR.responseEnd(r,o,r);"number"==typeof i&&(s.pending_events[i]=void 0)}var s=this,e=s.pending_events[i],o=r.timing?r.timing.requestStart:void 0;"spa_hard"!==r.initiator||e&&e.aborted||BOOMR.hasBrowserOnloadFired()?t(!1):BOOMR.utils.addListener(d,"load",function(){var e=BOOMR.now();BOOMR.setImmediate(function(){t(!0,e)})})};a.prototype.calculateSpaTimings=function(e){var t=BOOMR.getPerformance();if(t&&t.timing)if("spa_hard"===e.initiator){e.timing.responseEnd=t.timing.responseStart;e.timing.fetchStart=t.timing.navigationStart}else{if(!BOOMR.plugins.ResourceTiming||!BOOMR.plugins.ResourceTiming.is_supported())return;var n=BOOMR.plugins.ResourceTiming.getFilteredResourceTiming(e.timing.requestStart,e.timing.loadEventEnd,h.spaBackEndResources).entries,r=Math.round(e.timing.loadEventEnd-e.timing.requestStart);if(!n||!n.length){e.timers={t_resp:0,t_page:r,t_done:r};return}for(var i=e.timing.loadEventEnd-t.timing.navigationStart,s=0;s<n.length;s++)if(n[s].responseStart>i){n[s].responseStart=i;n[s].responseEnd=i}else n[s].responseEnd>i&&(n[s].responseEnd=i);var o=Math.round(BOOMR.plugins.ResourceTiming.calculateResourceTimingUnion(n)),u=r-o;if(o<0||r<0||u<0){BOOMR.addError("Incorrect SPA time calculation");return}e.timers={t_resp:o,t_page:u,t_done:r}}};a.prototype.setTimeout=function(e,t){var n=this;if(e){this.clearTimeout(t);this.timer=setTimeout(function(){n.timedout(t)},e)}};a.prototype.timedout=function(e){var t;this.clearTimeout(e);if(t=this.pending_events[e]){if(BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&!BOOMR.hasBrowserOnloadFired()){this.setTimeout(1e3,e);return}if(0===t.nodes_to_wait){if("click"===t.type&&(0===t.total_nodes||!t.resource.url)){this.watch--;this.pending_events[e]=void 0;return}this.sendEvent(e)}}};a.prototype.clearTimeout=function(e){if(this.timer&&e===this.pending_events.length-1){clearTimeout(this.timer);this.timer=null}};a.prototype.load_cb=function(e,t){var n,r=BOOMR.now(),i=e.target||e.srcElement;if(i&&i._bmr){n=i._bmr.idx;t=void 0!==t?t:i._bmr.res||0;if(!i._bmr.end[t]){i._bmr.end[t]=r;this.load_finished(n,r)}}};a.prototype.monitorMO=function(e){var t=this.pending_events[e];t&&delete t.ignoreMO};a.prototype.load_finished=function(e,t){var n=this.pending_events[e];if(n){n.nodes_to_wait--;if(0===n.nodes_to_wait){n.resource.timing.loadEventEnd=t||BOOMR.now();if(e===this.pending_events.length-1)if(BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)){if(!n.firedEarlyBeacon&&BOOMR.plugins.Early&&BOOMR.plugins.Early.is_supported()){if(this.timerEarlyBeacon){clearTimeout(this.timerEarlyBeacon);this.timerEarlyBeacon=null}this.timerEarlyBeacon=setTimeout(function(){l.timerEarlyBeacon=null;if(!n.firedEarlyBeacon&&0===n.nodes_to_wait){n.firedEarlyBeacon=!0;BOOMR.plugins.Early.sendEarlyBeacon(n.resource,n.type)}},100)}this.setTimeout(h.spaIdleTimeout,e)}else this.setTimeout(h.xhrIdleTimeout,e);else this.sendEvent(e)}}};a.prototype.wait_for_node=function(t,n){var e,r,i,s,o,u,a,d,l,c=this,p=!1,f=!1;if(t&&t.nodeName&&(t.nodeName.toUpperCase().match(/^(IMG|IFRAME|IMAGE)$/)||"LINK"===t.nodeName.toUpperCase()&&t.rel&&t.rel.match(/\bstylesheet\b/i))){t._bmr&&"number"==typeof t._bmr.res&&t._bmr.end[t._bmr.res]&&(f=!0);o=t.src||"function"==typeof t.getAttribute&&t.getAttribute("xlink:href")||t.href;t._bmr&&t._bmr.url!==o&&(f=!0);if(f){if("function"==typeof t._bmr.listener){c.load_cb({target:t,type:"changed"});t.removeEventListener("load",t._bmr.listener);t.removeEventListener("error",t._bmr.listener);delete t._bmr.listener}R("mutation URL changed from "+t._bmr.url+" to "+o+" for event idx: "+t._bmr.idx+" node:"+t._bmr.res)}if(!o||o.match(/^(about:|javascript:|data:)/i))return!1;if("IMG"===t.nodeName){if(t.naturalWidth&&!f)return!1;if("function"==typeof t.getAttribute&&""===t.getAttribute("src"))return!1}if("IFRAME"===t.nodeName&&f)return!1;if("function"==typeof t.getAttribute){a=parseInt(t.getAttribute("height"),10);d=parseInt(t.getAttribute("width"),10)}isNaN(a)&&(a=!t.style||"0"!==t.style.height&&"0px"!==t.style.height&&"1px"!==t.style.height?void 0:0);isNaN(d)&&(d=!t.style||"0"!==t.style.width&&"0px"!==t.style.width&&"1px"!==t.style.width?void 0:0);if(!isNaN(a)&&a<=1&&!isNaN(d)&&d<=1)return!1;if(t.style&&"none"===t.style.display)return!1;if(t.style&&"hidden"===t.style.visibility)return!1;if(!(e=this.pending_events[n]))return!1;u=e.resources.length;e.urls||(e.urls={});if(e.urls[o])return!1;if(!e.resource.url){O.href=o;if(h.excludeFilter(O)){R("Exclude for "+O.href+" matched. Excluding");return!1}e.resource.url=O.href}t._bmr||(t._bmr={end:{}});t._bmr.res=u;t._bmr.idx=n;delete t._bmr.end[u];t._bmr.url=o;l=function(e){c.load_cb(e,u);t.removeEventListener("load",l);t.removeEventListener("error",l);delete t._bmr.listener;R("mutation URL on"+e.type+", for event idx: "+n+" node: "+u)};R("Monitoring mutation URL: "+o+" for event idx: "+n+" node: "+u);t._bmr.listener=l;t.addEventListener("load",l);t.addEventListener("error",l);e.nodes_to_wait++;this.clearTimeout(n);e.total_nodes++;e.resources.push(t);e.urls[o]=1;p=!0}else t.nodeType===Node.ELEMENT_NODE&&["IMAGE","IMG"].forEach(function(e){if((r=t.getElementsByTagName(e))&&r.length)for(i=0,s=r.length;i<s;i++)p|=this.wait_for_node(r[i],n)},this);return p};a.prototype.add_event_resource=function(e){var t,n=this.pending_events.length-1;if(n<0)return-1;if(!(t=this.pending_events[n]))return-1;if(!e)return-1;R("Monitoring "+e.type+" URL: "+e.url+" for event id: "+n);t.nodes_to_wait++;t.total_nodes++;e.index=n;e.node=!0;return n};a.prototype.mutation_cb=function(e){var i,s,o;if(!this.watch)return!0;if((s=(i=this).pending_events.length-1)<0||!this.pending_events[s])return!0;if((o=this.pending_events[s]).ignoreMO)return!0;void 0===o.interesting&&(o.interesting=!1);if(e&&e.length){o.resource.timing.domComplete=BOOMR.now();e.forEach(function(e){var t,n,r;if("attributes"===e.type)o.interesting|=i.wait_for_node(e.target,s);else if("childList"===e.type){n=e.addedNodes.length;for(t=0;t<n;t++)o.interesting|=i.wait_for_node(e.addedNodes[t],s);n=e.removedNodes.length;for(t=0;t<n;t++)"IFRAME"===(r=e.removedNodes[t]).nodeName&&r._bmr&&i.load_cb({target:r,type:"removed"})}})}if(!o.interesting&&!o.timeoutExtended){this.setTimeout(1e3,s);o.timeoutExtended=!0}return!0};a.prototype.queue_is_empty=function(){return 0===this.nodesWaitingFor()};a.prototype.nodesWaitingFor=function(e){var t;if(0===this.pending_events.length)return 0;void 0===e&&(e=this.pending_events.length-1);return(t=this.pending_events[e])?t.nodes_to_wait:0};a.prototype.completeEvent=function(e){var t,n=BOOMR.now();if(0!==this.pending_events.length){void 0===e&&(e=this.pending_events.length-1);if(t=this.pending_events[e]){t.resource.timing.loadEventEnd=n;t.forced=!0;this.sendEvent(e)}}};l=new a;h={spaBackEndResources:["xmlhttprequest","script","fetch"],alwaysSendXhr:!1,excludeFilters:[],initialized:!1,captureXhrRequestResponse:!1,singlePageApp:!1,autoXhrEnabled:!1,monitorFetch:!1,fetchBodyUsedWait:200,spaIdleTimeout:1e3,xhrIdleTimeout:50,excludeFilter:function(e){var t,n;if(!e||!e.href)return!1;for(t=0;t<h.excludeFilters.length;t++)if("function"==typeof h.excludeFilters[t].cb){n=h.excludeFilters[t].ctx;h.excludeFilters[t].name&&R("Running filter: "+h.excludeFilters[t].name+" on URL: "+e.href);try{if(h.excludeFilters[t].cb.call(n,e)){R("Found matching filter at: "+h.excludeFilters[t].name+" for URL: "+e.href);return!0}}catch(e){BOOMR.addError(e,"BOOMR.plugins.AutoXHR.impl.excludeFilter()")}}return!1},loadFinished:function(t,e){var n,r,i,s,o;e=e||BOOMR.now();if(!t.timing.loadEventEnd){t.status&&BOOMR.fireEvent("xhr_error",t);t.timing.loadEventEnd=e;if((o=BOOMR.getPerformance())&&o.timing){r=o.timing.navigationStart;if(n=BOOMR.getResourceTiming(t.url,function(e,t){return e.responseEnd-t.responseEnd},function(e){return Math.ceil(r+e.startTime+2)>=t.timing.requestStart&&0!==e.responseEnd})){i=Math.floor(r+n.startTime);if((s=Math.floor(r+n.responseEnd))<=BOOMR.now()){t.timing.responseEnd=s;t.timing.loadEventEnd<s&&(t.timing.loadEventEnd=s);t.timing.requestStart=i;t.timing.fetchStart=i;0!==n.responseStart&&(t.timing.responseStart=Math.floor(r+n.responseStart));t.restiming=n}}}t.node&&m(t.url,h.alwaysSendXhr)&&l.sendResource(t);if(0<=t.index){l.monitorMO(t.index);l.load_finished(t.index,t.timing.responseEnd)}}}};BOOMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(e){var t,n;u=d.document;if(d&&u){O=u.createElement("A");BOOMR.utils.pluginConfig(h,e,"AutoXHR",["spaBackEndResources","alwaysSendXhr","monitorFetch","fetchBodyUsedWait","spaIdleTimeout","xhrIdleTimeout"]);BOOMR.instrumentXHR=_;BOOMR.uninstrumentXHR=M;BOOMR.instrumentFetch=o;BOOMR.uninstrumentFetch=g;if(!h.initialized){this.addExcludeFilter(s,null,"shouldExcludeXhr");h.initialized=!0}if(e&&e.AutoXHR&&e.AutoXHR.excludeFilters&&0<e.AutoXHR.excludeFilters.length)for(n=0;n<e.AutoXHR.excludeFilters.length;n++)h.excludeFilters.push(e.AutoXHR.excludeFilters[n]);h.autoXhrEnabled=e.instrument_xhr;h.singlePageApp=BOOMR.plugins.SPA&&BOOMR.plugins.SPA.isSinglePageApp(e);if(h.alwaysSendXhr&&h.autoXhrEnabled&&BOOMR.xhr&&"function"==typeof BOOMR.xhr.stop){function r(e){if(e.length)for(t=0;t<e.length;t++)y(e[t]);else y(e)}var i=BOOMR.xhr.stop(r);i&&i.length&&BOOMR.setImmediate(r,i)}if(h.singlePageApp){h.alwaysSendXhr||(h.autoXhrEnabled=!1);if(h.autoXhrEnabled){BOOMR.instrumentXHR();BOOMR.instrumentFetch()}}else if(h.autoXhrEnabled){BOOMR.instrumentXHR();BOOMR.instrumentFetch()}else if(!1===h.autoXhrEnabled){BOOMR.uninstrumentXHR();BOOMR.uninstrumentFetch()}BOOMR.registerEvent("xhr_error")}},getMutationHandler:function(){return l},getPathname:n,enableAutoXhr:function(){if(!h.autoXhrEnabled){BOOMR.instrumentXHR();BOOMR.instrumentFetch()}h.autoXhrEnabled=!0},addExcludeFilter:function(e,t,n){h.excludeFilters.push({cb:e,ctx:t,name:n})},setXhrRequestResponseCapturing:function(e){h.captureXhrRequestResponse=e},matchesAlwaysSendXhr:m}}function R(e){BOOMR.debug(e,"AutoXHR")}function n(e){if(!e)return null;e.href;var t=e.pathname;"/"!==t.charAt(0)&&(t="/"+t);return t}function s(e){var t;if(e.href){if(e.href.match(/^(about:|javascript:|data:)/i))return!0;if("function"==typeof BOOMR.getBeaconURL&&BOOMR.getBeaconURL()&&(0===(t=e.href.indexOf(BOOMR.getBeaconURL()))||5===t||6===t))return!0}return BOOMR.xhr_excludes.hasOwnProperty(e.href)||BOOMR.xhr_excludes.hasOwnProperty(e.hostname)||BOOMR.xhr_excludes.hasOwnProperty(n(e))}function a(){this.watch=0;this.timer=null;this.timerEarlyBeacon=null;this.pending_events=[];this.lastSpaLocation=null}function m(e,t){var n,r;if(!t||!e)return!1;if("boolean"==typeof t)return!0===t;if("function"==typeof t)try{return!0===t(e)}catch(e){return!1}if(BOOMR.utils.isArray(t))for(n=0;n<t.length;n++){if("string"==typeof(r=t[n])&&r===e)return!0;if(r instanceof RegExp&&r.test(e))return!0}return!1}function o(){if(h.monitorFetch&&"function"==typeof d.fetch&&"function"==typeof d.Request&&"function"==typeof d.Response&&"function"==typeof d.Promise&&"function"==typeof window.fetch&&!d.fetch.polyfill&&(!BOOMR.proxy_fetch||BOOMR.proxy_fetch!==d.fetch))if(BOOMR.proxy_fetch&&BOOMR.orig_fetch&&BOOMR.orig_fetch===d.fetch)d.fetch=BOOMR.proxy_fetch;else{BOOMR.orig_fetch=d.orig_fetch||d.fetch;BOOMR.proxy_fetch=function(e,t){var n,r,i,s={timing:{},initiator:"xhr"};if("object"==typeof e&&e instanceof d.Request){n=e.url;r=t&&t.method||e.method||"GET";h.captureXhrRequestResponse&&(i=t&&t.body||e.body||void 0)}else{n=e;r=t&&t.method||"GET";h.captureXhrRequestResponse&&(i=t&&t.body||void 0)}O.href=n;if(h.excludeFilter(O)){BOOMR.debug("Exclude found for resource: "+O.href+" Skipping Fetch instrumentation!","AutoXHR");return BOOMR.orig_fetch.apply(d,arguments)}BOOMR.fireEvent("xhr_init","fetch");s.url=O.href;s.method=r;s.type="fetch";i&&(s.requestPayload=i);BOOMR.fireEvent("xhr_send",{resource:s});l.addEvent(s);try{s.timing.requestStart=BOOMR.now();var o=BOOMR.orig_fetch.apply(this,arguments);function u(n,r,i){function s(){var e;if(i.fetchResponse&&!i.fetchResponse.bodyUsed&&h.fetchBodyUsedWait){e=BOOMR.now();i.responseBodyNotUsed=!0;setTimeout(function(){h.loadFinished(i,e)},h.fetchBodyUsedWait)}else h.loadFinished(i)}return function(){var e,t=n._bmrNextP;try{e=r.apply(this===window?d:this,arguments);for(;t&&!t._bmrHasOnFulfilled;)t=t._bmrNextP;t||(e instanceof d.Promise?e.then=a(e,e.then,i):s());return e}catch(e){for(;t&&!t._bmrHasOnRejected;)t=t._bmrNextP;t||s();throw e}}}function a(n,r,i){return n._bmrNextP?r:function(){var e=Array.prototype.slice.call(arguments);if(0<e.length){if("function"==typeof e[0]){e[0]=u(n,e[0],i);n._bmrHasOnFulfilled=!0}if(1<e.length&&"function"==typeof e[1]){e[1]=u(n,e[1],i);n._bmrHasOnRejected=!0}}var t=r.apply(n,e);(n._bmrNextP=t).then=a(t,t.then,i);return t}}o.then=a(o,o.then,s);return o.then(function(e){var t,n=!1,r=!1;e.redirected&&(s.responseUrl=e.url);(e.status<200||400<=e.status)&&(s.status=e.status);s.fetchResponse=e;0<=s.index&&l.monitorMO(s.index);if(h.captureXhrRequestResponse&&"function"==typeof e.clone){if(t=e.headers.get("content-type")){n=-1!==t.indexOf("json");r=-1!==t.indexOf("xml")}s.response={};try{e.clone().text().then(function(e){s.response.text=e;s.response.raw=e;r&&"function"==typeof d.DOMParser&&(s.response.xml=(new d.DOMParser).parseFromString(e,"text/xml"))}).then(null,function(e){})}catch(e){}if(n)try{e.clone().json().then(function(e){s.response.json=e}).then(null,function(e){})}catch(e){}}return e},function(e){!e||"AbortError"!==e.name&&20!==e.code?s.status=-998:s.status=p;throw e})}catch(e){s.status=f;h.loadFinished(s);throw e}};BOOMR.utils.overwriteNative(d,"fetch",BOOMR.proxy_fetch)}}function g(){"function"==typeof d.fetch&&BOOMR.orig_fetch&&BOOMR.orig_fetch!==d.fetch&&(d.fetch=BOOMR.orig_fetch)}function _(){if(!BOOMR.proxy_XMLHttpRequest||BOOMR.proxy_XMLHttpRequest!==d.XMLHttpRequest)if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===d.XMLHttpRequest){d.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest;a.start()}else{BOOMR.orig_XMLHttpRequest=d.orig_XMLHttpRequest||d.XMLHttpRequest;a.start();BOOMR.subscribe("click",function(){if(!h.singlePageApp){var e={timing:{},initiator:"click"};if(BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==d.XMLHttpRequest){e.timing.requestStart=BOOMR.now();l.addEvent(e)}}});BOOMR.proxy_XMLHttpRequest=function(){var i={timing:{},initiator:"xhr"},s=!1,o=!1,u=new BOOMR.orig_XMLHttpRequest,a=u.open,t=u.send;u.open=function(e,t,n){O.href=t;if(h.excludeFilter(O)){o=!0;R("Exclude found for resource: "+O.href+" Skipping XHR instrumentation!");return a.apply(u,arguments)}o=!1;void 0===n&&(n=!0);BOOMR.fireEvent("xhr_init","xhr");function r(e,t){u.addEventListener(e,function(){if("readystatechange"===e){i.timing[c[u.readyState]]=BOOMR.now();if(4===u.readyState&&0!==u.status){u.responseURL!==i.url&&(i.responseUrl=u.responseURL);(u.status<200||400<=u.status)&&(i.status=u.status);if(h.captureXhrRequestResponse){i.response={text:""===u.responseType||"text"===u.responseType?u.responseText:null,xml:""===u.responseType||"document"===u.responseType?u.responseXML:null,raw:u.response,json:u.responseJSON};if(u.response&&u.response.constructor&&u.response.constructor===BOOMR.boomerang_frame.Object&&BOOMR.boomerang_frame.Object!==d.Object)try{u.response.constructor=d.Object}catch(e){}}h.loadFinished(i)}else if(0===u.readyState&&"number"==typeof i.timing.open){u.responseURL!==i.url&&(i.responseUrl=u.responseURL);i.status=p;h.loadFinished(i)}}else{u.responseURL!==i.url&&(i.responseUrl=u.responseURL);"load"===e?0!==u.status&&(u.status<200||400<=u.status)&&(i.status=u.status):i.status=void 0===t?u.status:t;h.loadFinished(i)}},!1)}if(!s){n&&r("readystatechange");r("load");r("timeout",-1001);r("error",-998);r("abort",p)}i.url=O.href;i.method=e;i.type="xhr";delete i.status;n||(i.synchronous=!0);s=!0;try{return a.apply(u,arguments)}catch(e){i.status=f;h.loadFinished(i);throw e}};u.send=function(e){if(o)return t.apply(u,arguments);h.captureXhrRequestResponse&&(u.resource.requestPayload=e);BOOMR.fireEvent("xhr_send",u);l.addEvent(i);i.timing.requestStart=BOOMR.now();return void 0===i.status||i.status!==f?t.apply(u,arguments):void 0};u.resource=i;return u};BOOMR.proxy_XMLHttpRequest.UNSENT=0;BOOMR.proxy_XMLHttpRequest.OPENED=1;BOOMR.proxy_XMLHttpRequest.HEADERS_RECEIVED=2;BOOMR.proxy_XMLHttpRequest.LOADING=3;BOOMR.proxy_XMLHttpRequest.DONE=4;BOOMR.proxy_XMLHttpRequest.prototype=BOOMR.orig_XMLHttpRequest.prototype;BOOMR.utils.overwriteNative(d,"XMLHttpRequest",BOOMR.proxy_XMLHttpRequest)}}function M(){BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==d.XMLHttpRequest&&(d.XMLHttpRequest=BOOMR.orig_XMLHttpRequest)}function y(e){e.initiator="xhr";BOOMR.responseEnd(e)}}();
//# sourceMappingURL=auto-xhr.min.js.map